<div class="flex flex-col w-64 bg-white h-screen border-r border-slate-200 sticky top-0 overflow-y-auto z-50">
    <div class="p-6">
        <h1 class="text-xl font-bold text-[#5c56f1] flex items-center gap-2">
            <span class="w-8 h-8 bg-[#5c56f1] rounded-lg flex items-center justify-center text-white text-xs">S</span>
            Sale Support
        </h1>
    </div>

    <nav class="flex-1 px-4 space-y-1">
        <p class="px-4 text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 mt-4">Main Menu</p>
        
        <a href="dashboard.html" class="flex items-center gap-3 p-3.5 text-slate-600 hover:bg-indigo-50 hover:text-[#5c56f1] rounded-2xl transition">
            <span class="text-lg">ğŸ </span> <span class="font-medium">Dashboard</span>
        </a>
        <a href="new-ticket.html" class="flex items-center gap-3 p-3.5 text-slate-600 hover:bg-indigo-50 hover:text-[#5c56f1] rounded-2xl transition">
            <span class="text-lg">â•</span> <span class="font-medium">à¸ªà¸£à¹‰à¸²à¸‡ Ticket</span>
        </a>
        <a href="my-ticket.html" class="flex items-center gap-3 p-3.5 text-slate-600 hover:bg-indigo-50 hover:text-[#5c56f1] rounded-2xl transition">
            <span class="text-lg">ğŸ“‹</span> <span class="font-medium">à¹ƒà¸šà¸‡à¸²à¸™à¸‚à¸­à¸‡à¸‰à¸±à¸™</span>
        </a>
        <a href="all-ticket.html" class="flex items-center gap-3 p-3.5 text-slate-600 hover:bg-indigo-50 hover:text-[#5c56f1] rounded-2xl transition border-b border-slate-50 pb-4">
            <span class="text-lg">ğŸ«</span> <span class="font-medium">à¹ƒà¸šà¸‡à¸²à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”</span>
        </a>
        <a href="profile.html" class="flex items-center gap-3 p-3.5 text-slate-600 hover:bg-indigo-50 hover:text-[#5c56f1] rounded-2xl transition mt-2">
            <span class="text-lg">ğŸ‘¤</span> <span class="font-medium">à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§</span>
        </a>

        <div id="admin-section" class="hidden pt-6 border-t border-slate-100 mt-4">
            <p class="px-4 text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2">Admin Control</p>
            <a href="manage-tickets.html" class="flex items-center gap-3 p-3.5 text-slate-600 hover:bg-indigo-50 hover:text-[#5c56f1] rounded-2xl transition">
                <span class="text-lg">ğŸ› ï¸</span> <span class="font-medium">à¸ˆà¸±à¸”à¸à¸²à¸£ Ticket</span>
            </a>
            <a href="user-management.html" class="flex items-center gap-3 p-3.5 text-slate-600 hover:bg-indigo-50 hover:text-[#5c56f1] rounded-2xl transition">
                <span class="text-lg">ğŸ‘¥</span> <span class="font-medium">à¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™</span>
            </a>
            <a href="settings.html" class="flex items-center gap-3 p-3.5 text-slate-600 hover:bg-indigo-50 hover:text-[#5c56f1] rounded-2xl transition">
                <span class="text-lg">âš™ï¸</span> <span class="font-medium">à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸£à¸°à¸šà¸š</span>
            </a>
        </div>
    </nav>

    <div class="p-4 border-t border-slate-100">
        <button id="logout-btn" class="w-full flex items-center gap-3 p-4 text-red-500 hover:bg-red-50 rounded-2xl transition font-bold">
            <span class="text-lg">ğŸšª</span> à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸š
        </button>
    </div>
</div>

<script type="module">
    import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const auth = getAuth();
    const db = getFirestore();

    // à¸£à¸°à¸šà¸š Logout (à¹ƒà¸Šà¹‰ Event Listener à¹€à¸à¸·à¹ˆà¸­à¹€à¸¥à¸µà¹ˆà¸¢à¸‡à¸›à¸±à¸à¸«à¸² ReferenceError)
    document.getElementById('logout-btn').addEventListener('click', async () => {
        if (confirm("à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸šà¹ƒà¸Šà¹ˆà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?")) {
            await signOut(auth);
            window.location.href = "login.html";
        }
    });

    // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸´à¸—à¸˜à¸´à¹Œ Admin
    onAuthStateChanged(auth, async (user) => {
        if (user) {
            const snap = await getDoc(doc(db, "admin", user.uid));
            if (snap.exists() && snap.data().role === 'admin') {
                document.getElementById('admin-section').classList.remove('hidden');
            }
        }
    });
</script>
